{% extends 'base.html' %}

{% block title %}Your Plan{% endblock %}

{% block content %}
<div class="container">
    <h2 class="mb-4">Your Personalized Plan <span class="text-accent">Ready!</span></h2>

    <div id="plan-container">
        <p class="text-center">Loading your unique plan...</p>
    </div>

    <!-- Chat Floating Button -->
    <div id="chat-btn" onclick="toggleChat()"
        style="position: fixed; bottom: 30px; right: 30px; background: var(--accent); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); cursor: pointer; z-index: 1000;">
        ðŸ’ª
    </div>

    <!-- Chat Modal -->
    <div id="chat-modal" class="card"
        style="display: none; position: fixed; bottom: 100px; right: 30px; width: 350px; height: 500px; padding: 0; z-index: 1000; overflow: hidden; flex-direction: column;">
        <div
            style="padding: 15px; background: var(--bg-primary); border-bottom: 1px solid #334155; display: flex; justify-content: space-between; align-items: center;">
            <strong>FitForge AI</strong>
            <span onclick="toggleChat()" style="cursor: pointer;">&times;</span>
        </div>
        <div id="chat-messages"
            style="flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px;">
            <div
                style="background: #334155; padding: 10px; border-radius: 8px; align-self: flex-start; max-width: 80%;">
                Hi! I'm your fitness assistant. Ask me anything! ðŸ’ª
            </div>
        </div>
        <div style="padding: 15px; border-top: 1px solid #334155;">
            <div style="display: flex; gap: 10px;">
                <input type="text" id="chat-input" placeholder="Ask a question..."
                    style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid #334155; background: #0F172A; color: white;">
                <button onclick="sendMessage()" class="btn" style="padding: 8px 16px;">Send</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}
{% extends 'base.html' %}

{% block title %}Login{% endblock %}

{% block content %}
<div class="container">
    <div class="card" style="max-width: 400px; margin: 0 auto;">
        <h2 class="text-center mb-4">Welcome Back</h2>
        <form method="POST">
            <div class="input-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" placeholder="you@example.com" required>
            </div>
            <button type="submit" class="btn" style="width: 100%;">Continue</button>
        </form>
    </div>

    <!-- AI Configuration Section -->
    <div class="card" style="max-width: 400px; margin: 20px auto; padding: 20px; border-top: 4px solid #7c3aed;">
        <h3 class="text-center mb-3" style="font-size: 1.2rem;">
            {% if key_configured %}
            <span style="color: #22c55e;">●</span> AI Active (Gemini)
            {% else %}
            <span style="color: #ef4444;">●</span> AI Setup Required
            {% endif %}
        </h3>

        <p style="font-size: 0.9rem; color: #666; text-align: center;">
            To enable Smart Chat & Plan Generation, paste your free
            <a href="https://aistudio.google.com/app/apikey" target="_blank"
                style="color: #7c3aed; text-decoration: underline;">Google Gemini Key</a>.
        </p>

        <form action="/settings" method="POST">
            <div class="input-group">
                <input type="password" name="api_key" placeholder="Paste Key Here (starts with AIza...)" required
                    style="font-size: 0.9rem;">
            </div>
            <button type="submit" class="btn" style="width: 100%; background: #333;">Activate AI</button>
        </form>

        {% if not key_configured %}
        <p style="font-size: 0.8rem; margin-top: 10px; color: #888; text-align: center;">
            Don't have a key? The app will use the <strong>Free Local Engine</strong> automatically.
        </p>
        {% endif %}
    </div>
</div>
{% endblock %}